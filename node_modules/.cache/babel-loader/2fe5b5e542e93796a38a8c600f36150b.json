{"ast":null,"code":"var _jsxFileName = \"/home/admin1/Desktop/Chat System/Fundoo App/Front End/new-BookStore-FrontEnd/src/component/chatPage/Store.jsx\";\nimport React from \"react\";\nimport Io from 'socket.io-client';\nexport const CTX = React.createContext();\nconst initState = {\n  Friends1: [{\n    from: '',\n    msg: 'hello'\n  }],\n  Friends2: [{\n    from: '',\n    msg: 'Hiii'\n  }],\n  Friends3: [{\n    from: '',\n    msg: ''\n  }]\n};\n\nfunction reducer(state, action) {\n  const {\n    from,\n    msg\n  } = action.payload;\n\n  switch (action.type) {\n    case \"RECEIVE_MESSAGE\":\n      return { ...state,\n        [action.payload.topic]: [...state[action.payload.topic], {\n          from,\n          msg\n        }]\n      };\n\n    default:\n      return state;\n  }\n}\n\nlet socket;\n\nfunction sendChatAction(value) {\n  socket.emit('chat message', value);\n}\n\nexport default function Store(props) {\n  console.log(\"in Store Chat \", this.props.abc);\n  const [allChats, dispatch] = React.useReducer(reducer, initState);\n\n  if (!socket) {\n    socket = Io(':4000');\n    socket.on('chat message', function (msg) {\n      dispatch({\n        type: 'RECEIVE_MESSAGE',\n        payload: msg\n      });\n    });\n  }\n\n  const user = \"\";\n  return React.createElement(CTX.Provider, {\n    value: {\n      allChats,\n      sendChatAction,\n      user\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, props.children);\n}","map":{"version":3,"sources":["/home/admin1/Desktop/Chat System/Fundoo App/Front End/new-BookStore-FrontEnd/src/component/chatPage/Store.jsx"],"names":["React","Io","CTX","createContext","initState","Friends1","from","msg","Friends2","Friends3","reducer","state","action","payload","type","topic","socket","sendChatAction","value","emit","Store","props","console","log","abc","allChats","dispatch","useReducer","on","user","children"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,kBAAf;AACA,OAAO,MAAMC,GAAG,GAAGF,KAAK,CAACG,aAAN,EAAZ;AACP,MAAMC,SAAS,GAAE;AACbC,EAAAA,QAAQ,EAAE,CACN;AAACC,IAAAA,IAAI,EAAC,EAAN;AAASC,IAAAA,GAAG,EAAC;AAAb,GADM,CADG;AAIbC,EAAAA,QAAQ,EAAE,CACN;AAACF,IAAAA,IAAI,EAAC,EAAN;AAASC,IAAAA,GAAG,EAAC;AAAb,GADM,CAJG;AAObE,EAAAA,QAAQ,EAAE,CACN;AAACH,IAAAA,IAAI,EAAC,EAAN;AAASC,IAAAA,GAAG,EAAC;AAAb,GADM;AAPG,CAAjB;;AAYA,SAASG,OAAT,CAAiBC,KAAjB,EAAwBC,MAAxB,EAA+B;AAC3B,QAAM;AAACN,IAAAA,IAAD;AAAMC,IAAAA;AAAN,MAAaK,MAAM,CAACC,OAA1B;;AACA,UAAOD,MAAM,CAACE,IAAd;AACG,SAAK,iBAAL;AACI,aAAM,EACL,GAAGH,KADE;AAEL,SAACC,MAAM,CAACC,OAAP,CAAeE,KAAhB,GAAuB,CACnB,GAAGJ,KAAK,CAACC,MAAM,CAACC,OAAP,CAAeE,KAAhB,CADW,EAEnB;AACIT,UAAAA,IADJ;AAEIC,UAAAA;AAFJ,SAFmB;AAFlB,OAAN;;AAUH;AACI,aAAOI,KAAP;AAbR;AAeH;;AAID,IAAIK,MAAJ;;AACA,SAASC,cAAT,CAAwBC,KAAxB,EAA8B;AAC1BF,EAAAA,MAAM,CAACG,IAAP,CAAY,cAAZ,EAA2BD,KAA3B;AACH;;AAGD,eAAe,SAASE,KAAT,CAAeC,KAAf,EAAqB;AAChCC,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA6B,KAAKF,KAAL,CAAWG,GAAxC;AAEA,QAAM,CAACC,QAAD,EAAWC,QAAX,IAAuB1B,KAAK,CAAC2B,UAAN,CAAiBjB,OAAjB,EAA0BN,SAA1B,CAA7B;;AACA,MAAG,CAACY,MAAJ,EAAW;AACPA,IAAAA,MAAM,GAAGf,EAAE,CAAC,OAAD,CAAX;AACAe,IAAAA,MAAM,CAACY,EAAP,CAAU,cAAV,EAAyB,UAASrB,GAAT,EAAa;AAClCmB,MAAAA,QAAQ,CAAC;AAACZ,QAAAA,IAAI,EAAE,iBAAP;AAAyBD,QAAAA,OAAO,EAAEN;AAAlC,OAAD,CAAR;AAEH,KAHD;AAIH;;AACD,QAAMsB,IAAI,GAAG,EAAb;AACA,SACI,oBAAC,GAAD,CAAK,QAAL;AAAc,IAAA,KAAK,EAAG;AAACJ,MAAAA,QAAD;AAAUR,MAAAA,cAAV;AAAyBY,MAAAA;AAAzB,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKR,KAAK,CAACS,QADX,CADJ;AAKH","sourcesContent":["import React from \"react\";\nimport Io from 'socket.io-client'\nexport const CTX = React.createContext();\nconst initState ={\n    Friends1 :[\n        {from:'',msg:'hello'},\n    ],\n    Friends2 :[\n        {from:'',msg:'Hiii'},\n    ],\n    Friends3 :[\n        {from:'',msg:''},\n    ]\n\n}\nfunction reducer(state, action){\n    const {from,msg} = action.payload;\n    switch(action.type){\n       case \"RECEIVE_MESSAGE\":\n           return{\n            ...state,\n            [action.payload.topic]:[\n                ...state[action.payload.topic],\n                {\n                    from,\n                    msg \n                }\n            ]\n           }\n        default:\n            return state\n    }\n}\n\n\n\nlet socket;\nfunction sendChatAction(value){\n    socket.emit('chat message',value);  \n}\n\n\nexport default function Store(props){    \n    console.log(\"in Store Chat \",this.props.abc);\n    \n    const [allChats, dispatch] = React.useReducer(reducer, initState)\n    if(!socket){\n        socket = Io(':4000');\n        socket.on('chat message',function(msg){\n            dispatch({type :'RECEIVE_MESSAGE',payload: msg});\n            \n        })\n    }\n    const user = \"\"\n    return(\n        <CTX.Provider value= {{allChats,sendChatAction,user}}>\n            {props.children}\n        </CTX.Provider >\n    )\n}"]},"metadata":{},"sourceType":"module"}